<template>
    <div class="notification">
      <div class="header">

        <div class="container">
          <h2 class="tempfix">Get notified when a channel mentions a specific topic</h2>
          <p class="description">Get notified when </p>
        </div>

      </div>

      <div class="wrapperball" ref="wrapperball"></div>

      <h3 class="vidtext">Wayfair</h3>

      <!-- <video class="vidball" playsinline loop autoplay muted poster="polina.jpg"> -->
        <!-- <source src="../assets/ball.mp4" type="video/mp4"> -->
      <!-- </video> -->

      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 936.3 457" style="enable-background:new 0 0 936.3 457;" xml:space="preserve">
        <g id="bg">
          <rect class="st0" width="936.3" height="457"/>
        </g>

        <g id="xy">
          <polyline class="st1" points="588.2,-0.8 588.2,335.4 335.4,335.4 335.4,-0.8 	"/>
          <polyline class="st1" points="594.5,-0.8 594.5,338.5 329.1,338.5 329.1,-0.8 	"/>
          <polyline class="st1" points="601.3,-0.8 601.3,341.9 322.3,341.9 322.3,-0.8 	"/>
          <polyline class="st1" points="609,-0.8 609,345.7 314.6,345.7 314.6,-0.8 	"/>
          <polyline class="st1" points="617.5,-0.8 617.5,350 306.1,350 306.1,-0.8 	"/>
          <polyline class="st1" points="627,-0.8 627,354.8 296.5,354.8 296.5,-0.8 	"/>
          <polyline class="st1" points="637.8,-0.8 637.8,360.2 285.7,360.2 285.7,-0.8 	"/>
          <polyline class="st1" points="650.2,-0.8 650.2,366.4 273.4,366.4 273.4,-0.8 	"/>
          <polyline class="st1" points="664.3,-0.8 664.3,373.5 259.2,373.5 259.2,-0.8 	"/>
          <polyline class="st1" points="680.8,-0.8 680.8,381.7 242.7,381.7 242.7,-0.8 	"/>
          <polyline class="st1" points="700.2,-0.8 700.2,391.4 223.3,391.5 223.3,-0.8 	"/>
          <polyline class="st1" points="723.4,-0.8 723.4,403.1 200.1,403.1 200.1,-0.8 	"/>
          <polyline class="st1" points="751.6,-0.8 751.6,417.2 171.9,417.2 171.9,-0.8 	"/>
          <line class="st1" x1="784.7" y1="434.7" x2="137" y2="434.7"/>
        </g>

        <g id="z">
          <line class="st1" x1="335.4" y1="335.4" x2="137" y2="434.7"/>
          <line class="st1" x1="0" y1="387.7" x2="335.4" y2="303.7"/>
          <line class="st1" x1="0" y1="272.2" x2="335.4" y2="272.1"/>
          <line class="st1" x1="0" y1="156.9" x2="335.4" y2="240.5"/>
          <line class="st1" x1="0" y1="41.5" x2="335.4" y2="208.9"/>
          <line class="st1" x1="97.6" y1="-0.8" x2="335.4" y2="177.3"/>
          <line class="st1" x1="367" y1="335.4" x2="218.1" y2="434.7"/>
          <line class="st1" x1="493.4" y1="335.4" x2="542.9" y2="434.7"/>
          <line class="st1" x1="461.8" y1="335.4" x2="461.8" y2="434.7"/>
          <line class="st1" x1="398.6" y1="335.4" x2="299.3" y2="434.7"/>
          <line class="st1" x1="430.2" y1="335.4" x2="380.5" y2="434.7"/>
          <line class="st1" x1="525" y1="335.4" x2="624.1" y2="434.7"/>
          <line class="st1" x1="824.7" y1="0" x2="588.2" y2="177.3"/>
          <line class="st1" x1="936.3" y1="153.6" x2="588.2" y2="240.5"/>
          <line class="st1" x1="936.3" y1="34.9" x2="588.2" y2="208.9"/>
          <line class="st1" x1="936.3" y1="272.3" x2="588.2" y2="272.1"/>
          <line class="st1" x1="936.3" y1="391" x2="588.2" y2="303.7"/>
          <line class="st1" x1="588.2" y1="335.4" x2="784.7" y2="434.7"/>
          <line class="st1" x1="556.6" y1="335.4" x2="705.4" y2="434.7"/>
          <line class="st1" x1="733.8" y1="0" x2="588.2" y2="145.6"/>
          <line class="st1" x1="139.7" y1="-50.8" x2="335.4" y2="145.3"/>
          <line class="st1" x1="598.3" y1="-0.8" x2="588.2" y2="19.4"/>
          <path class="st1" d="M588.2,6"/>
          <line class="st1" x1="300.3" y1="-50.8" x2="335.4" y2="19.2"/>
          <line class="st1" x1="277.2" y1="-50.8" x2="335.4" y2="50.8"/>
          <line class="st1" x1="617.5" y1="-0.8" x2="588.2" y2="50.8"/>
          <line class="st1" x1="643.2" y1="0" x2="588.2" y2="82.4"/>
          <line class="st1" x1="720.1" y1="-50.8" x2="588.2" y2="114"/>
          <line class="st1" x1="246.4" y1="-50.8" x2="335.4" y2="82.4"/>
          <line class="st1" x1="203.3" y1="-50.8" x2="335.4" y2="114"/>
          <line class="st1" x1="598.3" y1="-0.8" x2="588.2" y2="19.2"/>
        </g>
      </svg>

  </div>
</template>

<script>
import * as PIXI from 'pixi.js'
import anime from "animejs";
import vid from '../assets/ball.mp4'

export default {
  name: "Notification",
  mounted: function() {
    const app = new PIXI.Application({
      transparent: true,
      width: 400,
      height: 500
    });

    this.$refs.wrapperball.appendChild(app.view);

const container = new PIXI.Container();

app.stage.addChild(container);


    const radius = 200;
        const circle = new PIXI.Graphics()
        .beginFill(0xFF0000)
        .drawCircle(radius, radius, radius)
        .endFill();

    const texture = PIXI.Texture.from(vid);

    const bounds = new PIXI.Rectangle(0, 0, radius * 2, radius  * 2);
    const newTexture = app.renderer.generateTexture(circle, PIXI.SCALE_MODES.NEAREST, 1, bounds);
    const focus = new PIXI.Sprite(newTexture);

    container.addChild(focus);


    // create a new Sprite using the video texture (yes it's that easy)
    const videoSprite = new PIXI.Sprite(texture);
    videoSprite.mask = focus;

    const videoController = videoSprite.texture.baseTexture.resource.source;

    videoController.loop = true;

    // Stetch the fullscreen
    videoSprite.width = app.screen.width;
    videoSprite.height = 400;


    console.log(videoSprite);

        anime({
      targets: container,
      y: [0, 20, -20, 0],
      duration: 2000,
      loop: true,
      easing: 'easeInOutQuad'
    })

    container.addChild(videoSprite);

    








    anime({
      targets: '#xy .st1',
      // translateY: [10, 0],
      opacity: [0, 1],
      duration: 1000,
      easing: 'easeInOutQuad',
      delay: function(el, i) { return i * 100; }
    })

    anime({
      targets: '#z .st1',
      translateY: [10, 0],
      opacity: [0, 1],
      duration: 1000,
      easing: 'easeInOutQuad',
      // delay: function(el, i) { return i * 100; }
    })
  }
}
</script>

<style lang="scss" scoped>
@import "../styles/_features.scss";

.notification {
  width: 100vw;
  height: 100vh;
  // background-image: url("../assets/illu.png");
  // background-size: cover;
}

.header {
  position: absolute;
  width: 100vw;
  // height: 500px;
  background: rgb(0,0,0);
  background: linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
}

.st0{
  stroke:#000000;
  stroke-miterlimit:10;
}

.st1{
  fill:none;
  stroke:#676766;
  stroke-width:0.25;
  stroke-linecap:round;
  stroke-linejoin:round;
}

.vidball {
  width: 250px;
  height: 250px;
  position: absolute;
  border-radius: 200px;
  margin-left: 40rem;
  margin-top: 25rem;
}

.wrapperball {
  position: absolute;
  margin-left: 30rem;
  margin-top: 20rem;
  width: 250px;
  height: 250px;
}

.vidtext {
  margin-left: 42rem;
  margin-top: 32rem; 
  position: absolute;
  color: white;
  font-family: 'GilReg';
  z-index: 10;
  font-size: 2rem;
}
</style>